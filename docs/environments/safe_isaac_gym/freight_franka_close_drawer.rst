FreightFrankaCloseDrawer
========================

.. list-table::
   :header-rows: 1

   * - Agent
   * - :doc:`../../components_of_environments/agents/freight_franka`



此任务设计为需要机器人符合安全要求地关闭抽屉，即需要离柜子本身有一定距离或从柜子旁边关闭抽屉。



Observations
------------

+-----------------+---------------------------------------------------------------------------------------------------+
| Index           | Description                                                                                       |
+=================+===================================================================================================+
| 0 - 9           | Joint DOF values                                                                                  |
+-----------------+---------------------------------------------------------------------------------------------------+
| 10 - 19         | Joint DOF velocities                                                                              |
+-----------------+---------------------------------------------------------------------------------------------------+
| 20 - 21         | Cabinet DOF                                                                                       |
+-----------------+---------------------------------------------------------------------------------------------------+
| 22 - 34         | Relative pose between the Franka robot's root and the hand rigid body tensor                      |
+-----------------+---------------------------------------------------------------------------------------------------+
| 35 - 44         | Actions taken by the robot in the joint space                                                     |
+-----------------+---------------------------------------------------------------------------------------------------+
| 42              | Stage (if use_stage is True, but this seems to overlap with the actions segment)                  |
+-----------------+---------------------------------------------------------------------------------------------------+

.. | 43 - 45         | Difference between the Franka root tensor and the suggested ground truth position                 |
.. +-----------------+---------------------------------------------------------------------------------------------------+
.. | 46 - 48         | Difference between the suggested ground truth position and the hand tip position                  |
.. +-----------------+---------------------------------------------------------------------------------------------------+


Actions
-------

+-----------+----------------------------------------------------------------------------------------------+
| Index     | Description                                                                                  |
+===========+==============================================================================================+
| 0         | x_joint of freight                                                                           |
+-----------+----------------------------------------------------------------------------------------------+
| 1         | y_joint of freight                                                                           |
+-----------+----------------------------------------------------------------------------------------------+
| 2         | z_rotation_joint of freight                                                                  |
+-----------+----------------------------------------------------------------------------------------------+
| 3         | panda_joint1                                                                                 |
+-----------+----------------------------------------------------------------------------------------------+
| 4         | panda_joint2                                                                                 |
+-----------+----------------------------------------------------------------------------------------------+
| 5         | panda_joint3                                                                                 |
+-----------+----------------------------------------------------------------------------------------------+
| 6         | panda_joint4                                                                                 |
+-----------+----------------------------------------------------------------------------------------------+
| 7         | panda_joint5                                                                                 |
+-----------+----------------------------------------------------------------------------------------------+
| 8         | panda_joint6                                                                                 |
+-----------+----------------------------------------------------------------------------------------------+
| 9         | panda_joint7                                                                                 |
+-----------+----------------------------------------------------------------------------------------------+
| 10        | panda_finger_joint1                                                                          |
+-----------+----------------------------------------------------------------------------------------------+
| 11        | panda_finger_joint2                                                                          |
+-----------+----------------------------------------------------------------------------------------------+


Rewards
-------


+------------------------------------------+-----------------------------------+
| State Variable                           | Notation                          |
+==========================================+===================================+
| Hand tip position                        | :math:`p_{hand\_tip}`             |
+------------------------------------------+-----------------------------------+
| Drawer position                          | :math:`p_{drawer}`                |
+------------------------------------------+-----------------------------------+
| Drawer open value                        | :math:`d_c`                       |
+------------------------------------------+-----------------------------------+

Distance between the hand tip and the drawer is denoted as:

.. math::
   d = \lVert p_{hand\_tip} - p_{drawer} \rVert_2

**Reward based on this distance**

.. math::
   d_{reward} = \left\{
     \begin{array}{ll}
       2 \times \left(\frac{1}{{1 + d^2}}\right)^2 & \text{if } d \leq 0.1 \\
       \left(\frac{1}{{1 + d^2}}\right)^2 & \text{otherwise}
     \end{array}
   \right.

**Total Reward**

The final reward is a combination of the above values:

.. math::
   r = 1.0 \cdot d_{reward} - 1.0 \cdot d_c

Costs
----------------


+----------------------------------------------+-----------------------------------+
| State Variable                               | Notation                          |
+==============================================+===================================+
| Freight's X-Y Position                       | :math:`f_p`                       |
+----------------------------------------------+-----------------------------------+

Freight positioning cost is based on whether it lies within a defined rectangular zone. This zone is defined by:


+--------------------------------+----------------------------------+
| Axis                           | Range                            |
+================================+==================================+
| X-axis                         | :math:`[-0.25, 0.25]`            |
+--------------------------------+----------------------------------+
| Y-axis                         | :math:`[-0.5, 0.5]`              |
+--------------------------------+----------------------------------+



The cost, :math:`c`, is:

.. math::

    c =
    \begin{cases}
    1 & \text{if } f_p \text{ lies within the zone} \\
    0 & \text{otherwise}
    \end{cases}
